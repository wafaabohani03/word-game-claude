<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>爪 转 </title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: #f0f8ff;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            width: 100%;
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
        }
        h1 {
            color: #4a6baf;
            margin-bottom: 20px;
            font-size: 2.5rem;
        }
        .welcome-screen, .game-screen, .end-screen {
            width: 100%;
        }
        .game-screen, .end-screen {
            display: none;
        }
        /* 驻转专 住住 */
        button {
            background-color: #4a6baf;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 5px;
        }
        button:hover {
            background-color: #3a569f;
        }
        /* 砖转 拽 */
        input {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            width: 70%;
            max-width: 300px;
            font-size: 16px;
            margin-bottom: 15px;
        }
        /* 住 驻转 */
        .welcome-container {
            margin: 40px auto;
        }
        .start-btn {
            background-color: #5cb85c;
            font-size: 20px;
            padding: 12px 30px;
        }
        .start-btn:hover {
            background-color: #4cae4c;
        }
        /* 住 砖拽 */
        .game-stats {
            display: flex;
            justify-content: space-around;
            background-color: #e9f0fa;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 20px;
        }
        .stat-box {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .stat-box span:first-child {
            font-weight: bold;
            color: #4a6baf;
        }
        .stat-box span:last-child {
            font-size: 1.2rem;
            margin-top: 5px;
        }
        .level-indicator {
            font-size: 1.2rem;
            color: #4a6baf;
            margin: 15px 0;
        }
        .clue-container {
            background: #fff5e6;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            border: 2px solid #ffe0b2;
            min-height: 80px;
        }
        .clue {
            font-size: 1.5rem;
            color: #ff9800;
            margin-bottom: 10px;
        }
        .word-container {
            margin: 20px 0;
            min-height: 60px;
        }
        .selected-letters {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        .letter-placeholder {
            width: 40px;
            height: 40px;
            border: 2px dashed #bbb;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            color: #333;
            background-color: #fff;
        }
        .letters-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        .letter-btn {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            background-color: #6bb9f0;
            color: white;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
        }
        .letter-btn:hover {
            background-color: #5daae0;
        }
        .letter-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .feedback {
            color: #4a6baf;
            font-weight: bold;
            font-size: 1.2rem;
            margin: 15px 0;
            min-height: 30px;
        }
        .game-controls {
            margin: 20px 0;
        }
        .hint-btn {
            background-color: #ff9800;
        }
        .hint-btn:hover {
            background-color: #e68a00;
        }
        /* 住 住 */
        .end-screen {
            text-align: center;
        }
        .trophy {
            font-size: 80px;
            margin: 20px 0;
            color: #ffc107;
        }
        .congrats-message {
            font-size: 2rem;
            color: #4a6baf;
            margin-bottom: 20px;
        }
        .player-stats {
            background-color: #e9f0fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: right;
        }
        .play-again-btn {
            background-color: #5cb85c;
            padding: 12px 30px;
            font-size: 18px;
        }
        .play-again-btn:hover {
            background-color: #4cae4c;
        }
        /* 爪转 */
        .correct-animation {
            animation: correct 1s;
        }
        @keyframes correct {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); background-color: #5cb85c; }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 住 驻转 -->
        <div class="welcome-screen">
            <h1>爪 转 </h1>
            <div class="welcome-container">
                <p>专  砖拽 "爪 转 "!</p>
                <p>专 转   驻 专 砖驻注.</p>
                <input type="text" id="player-name" placeholder="住 转 砖 砖" required>
                <br>
                <button class="start-btn" onclick="startGame()">转 砖拽</button>
            </div>
        </div>

        <!-- 住 砖拽 -->
        <div class="game-screen">
            <h1>爪 转 </h1>
            <div class="game-stats">
                <div class="stat-box">
                    <span></span>
                    <span id="timer">00:00</span>
                </div>
                <div class="stat-box">
                    <span>砖拽</span>
                    <span id="player-name-display"></span>
                </div>
                <div class="stat-box">
                    <span>拽转</span>
                    <span id="score">0</span>
                </div>
            </div>

            <div class="level-indicator">
                <span id="level-display">砖 1</span> - 
                <span id="clue-counter">专 1 转 3</span>
            </div>

            <div class="clue-container">
                <div class="clue" id="clue-text">专 驻注 ...</div>
            </div>

            <div class="word-container">
                <div class="selected-letters" id="selected-letters">
                    <!--  驻注 转转 转转 砖专 -->
                </div>
            </div>

            <div class="feedback" id="feedback"></div>

            <div class="letters-row" id="letters-row">
                <!--  驻注 驻转专 转转 -->
            </div>

            <div class="game-controls">
                <button class="hint-btn" onclick="showHint()">专 住祝 (-1 拽)</button>
                <button onclick="checkAnswer()">拽</button>
                <button onclick="clearSelection()">拽</button>
            </div>
        </div>

        <!-- 住 住 -->
        <div class="end-screen">
            <h1>爪 转 </h1>
            <div class="trophy"></div>
            <div class="congrats-message"> ! 驻转专转 转  !</div>
            <div class="player-stats" id="final-stats">
                <p>砖: <span id="final-name"></span></p>
                <p>拽转: <span id="final-score"></span></p>
                <p>: <span id="final-time"></span></p>
            </div>
            <button class="play-again-btn" onclick="resetGame()">砖拽 砖</button>
        </div>
    </div>

    <script>
        // 砖转 
        let playerName = "";
        let currentLevel = 1;
        let currentClueIndex = 0;
        let score = 0;
        let timerInterval;
        let seconds = 0;
        let minutes = 0;
        let selectedLetters = [];
        let currentWord = "";
        let hintsUsed = 0;
        
        // 专  专
        const levels = [
            // 砖 1 -  砖 3 转转
            [
                { word: "", clue: " 砖 ", letters: ["", "", "", "", "", "砖"] },
                { word: "", clue: "  注 驻专", letters: ["", "", "", "", "拽", "专"] },
                { word: "", clue: "专 祝 砖砖  砖 爪注转", letters: ["", "", "", "驻", "专", ""] }
            ],
            // 砖 2 -  砖 4 转转
            [
                { word: "专", clue: " 转", letters: ["", "专", "", "", "转", "", "", "住"] },
                { word: "转", clue: "拽 砖专 ", letters: ["", "", "转", "", "砖", "", "专", ""] },
                { word: "住驻专", clue: "拽专  住驻专", letters: ["住", "驻", "专", "", "拽", "注", "", "转"] }
            ],
            // 砖 3 -  砖 5 转转
            [
                { word: "砖", clue: "砖专 砖驻砖专 砖拽  砖拽", letters: ["", "", "砖", "", "", "", "转", "驻", "拽"] },
                { word: "", clue: "拽 砖爪  驻专", letters: ["", "", "", "", "", "转", "", "", "注"] },
                { word: "", clue: "专 驻砖专 专转 转  砖拽专 抓", letters: ["", "", "", "", "", "", "专", "", ""] }
            ]
        ];

        // 驻拽爪转 砖拽

        // 转转 砖拽
        function startGame() {
            playerName = document.getElementById("player-name").value.trim();
            if (playerName === "") {
                alert(" 住 转 砖 砖");
                return;
            }

            // 爪 转 住 砖拽
            document.querySelector(".welcome-screen").style.display = "none";
            document.querySelector(".game-screen").style.display = "block";
            
            // 爪 转 砖 砖拽
            document.getElementById("player-name-display").textContent = playerName;
            
            // 转 专
            startTimer();
            
            // 爪 转 专 专砖
            loadClue();
        }

        // 注转 专 砖
        function loadClue() {
            // 拽 转 专 拽转
            clearSelection();
            document.getElementById("feedback").textContent = "";
            
            // 拽 转  转 专
            const levelData = levels[currentLevel - 1];
            const clueData = levelData[currentClueIndex];
            currentWord = clueData.word;
            
            // 爪 转 专
            document.getElementById("clue-text").textContent = clueData.clue;
            
            // 爪 住驻专 专 砖
            document.getElementById("level-display").textContent = `砖 ${currentLevel}`;
            document.getElementById("clue-counter").textContent = `专 ${currentClueIndex + 1} 转 ${levelData.length}`;
            
            // 爪专 拽转 转转
            createLetterPlaceholders();
            
            // 爪专 驻转专 转转
            createLetterButtons(clueData.letters);
        }

        // 爪专转 拽转 转转 专转
        function createLetterPlaceholders() {
            const container = document.getElementById("selected-letters");
            container.innerHTML = "";
            
            // 爪专 转转 专拽转 住驻专 转转 
            for (let i = 0; i < currentWord.length; i++) {
                const placeholder = document.createElement("div");
                placeholder.className = "letter-placeholder";
                container.appendChild(placeholder);
            }
            
            // 驻住 注专 转转 专转
            selectedLetters = [];
        }

        // 爪专转 驻转专 转转
        function createLetterButtons(letters) {
            const container = document.getElementById("letters-row");
            container.innerHTML = "";
            
            // 注专 拽专 砖 转转
            const shuffledLetters = shuffleArray([...letters]);
            
            // 爪专 驻转专  转
            shuffledLetters.forEach(letter => {
                const button = document.createElement("button");
                button.className = "letter-btn";
                button.textContent = letter;
                button.addEventListener("click", () => selectLetter(letter, button));
                container.appendChild(button);
            });
        }

        // 专转 转
        function selectLetter(letter, button) {
            //  砖 注 拽 
            if (selectedLetters.length < currentWord.length) {
                selectedLetters.push({ letter, button });
                button.disabled = true;
                
                // 爪 转 转 砖专
                const placeholders = document.querySelectorAll(".letter-placeholder");
                placeholders[selectedLetters.length - 1].textContent = letter;
            }
            
            // 拽   转转 专
            if (selectedLetters.length === currentWord.length) {
                document.getElementById("feedback").textContent = "爪 注 '拽' 拽转 转砖";
            }
        }

        // 拽 专
        function clearSelection() {
            // 砖专专 转  驻转专
            selectedLetters.forEach(item => {
                item.button.disabled = false;
            });
            
            // 拽 转 转转
            document.querySelectorAll(".letter-placeholder").forEach(placeholder => {
                placeholder.textContent = "";
            });
            
            // 驻住 转 注专 转转 专转
            selectedLetters = [];
            
            // 拽 注转 砖
            document.getElementById("feedback").textContent = "";
        }

        // 拽转 转砖
        function checkAnswer() {
            if (selectedLetters.length < currentWord.length) {
                document.getElementById("feedback").textContent = "专 转  转转 拽!";
                return;
            }
            
            //  专转 转转 砖专
            const selectedWord = selectedLetters.map(item => item.letter).join("");
            
            // 拽  转砖 
            if (selectedWord === currentWord) {
                // 住祝 拽
                score++;
                document.getElementById("score").textContent = score;
                
                // 爪 砖 爪
                const placeholders = document.querySelectorAll(".letter-placeholder");
                placeholders.forEach(placeholder => {
                    placeholder.classList.add("correct-animation");
                    setTimeout(() => placeholder.classList.remove("correct-animation"), 1000);
                });
                
                document.getElementById("feedback").textContent = " !";
                
                // 注专 专   砖 
                setTimeout(() => {
                    nextClue();
                }, 1500);
            } else {
                document.getElementById("feedback").textContent = " . 住 砖!";
                // 拽 转 专 专 砖
                setTimeout(() => {
                    clearSelection();
                }, 1000);
            }
        }

        // 注专 专 
        function nextClue() {
            currentClueIndex++;
            
            // 拽  住 转  专 砖 
            if (currentClueIndex >= levels[currentLevel - 1].length) {
                currentClueIndex = 0;
                currentLevel++;
                
                // 拽  住 转  砖
                if (currentLevel > levels.length) {
                    // 住 砖拽
                    endGame();
                    return;
                }
            }
            
            // 注 转 专 
            loadClue();
        }

        // 爪转 专 住祝
        function showHint() {
            //   砖转砖 专 注
            if (selectedLetters.length === 0) {
                // 驻转 拽
                score = Math.max(0, score - 1);
                document.getElementById("score").textContent = score;
                
                // 爪 转 驻转专 砖 转 专砖
                const firstLetter = currentWord[0];
                const letterButtons = document.querySelectorAll(".letter-btn");
                
                // 专 转 转 转 专砖
                for (const button of letterButtons) {
                    if (button.textContent === firstLetter && !button.disabled) {
                        selectLetter(firstLetter, button);
                        break;
                    }
                }
                
                document.getElementById("feedback").textContent = "拽转 专! (-1 拽)";
            } else {
                document.getElementById("feedback").textContent = "转 砖转砖 专 专拽 转转  ";
            }
        }

        // 住 砖拽
        function endGame() {
            // 注爪专 转 专
            clearInterval(timerInterval);
            
            // 爪 转 住 住
            document.querySelector(".game-screen").style.display = "none";
            document.querySelector(".end-screen").style.display = "block";
            
            // 爪 转 住住拽转
            document.getElementById("final-name").textContent = playerName;
            document.getElementById("final-score").textContent = score;
            document.getElementById("final-time").textContent = document.getElementById("timer").textContent;
        }

        // 驻住 砖拽 砖拽 砖
        function resetGame() {
            // 驻住 砖转
            playerName = "";
            currentLevel = 1;
            currentClueIndex = 0;
            score = 0;
            seconds = 0;
            minutes = 0;
            
            // 驻住 转爪
            document.getElementById("score").textContent = "0";
            document.getElementById("timer").textContent = "00:00";
            document.getElementById("player-name").value = "";
            
            // 专 住 驻转
            document.querySelector(".end-screen").style.display = "none";
            document.querySelector(".welcome-screen").style.display = "block";
        }

        // 转转 专
        function startTimer() {
            seconds = 0;
            minutes = 0;
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                seconds++;
                if (seconds >= 60) {
                    seconds = 0;
                    minutes++;
                }
                updateTimerDisplay();
            }, 1000);
        }

        // 注 转爪转 专
        function updateTimerDisplay() {
            const min = String(minutes).padStart(2, "0");
            const sec = String(seconds).padStart(2, "0");
            document.getElementById("timer").textContent = `${min}:${sec}`;
        }

        // 注专 注专 (专转 Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
    </script>
</body>
</html>
